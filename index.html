<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link href="bootstrap.min.css" type="text/css" rel="stylesheet" />
    <title>Fake Web For OT</title>
    <style>
      div {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
      }
    </style>
  </head>
  <body>
    <div id="d-flex">
      <h1 class="text-center">It's iframe's Block</h1>
      <code id="code" class="bg-light"></code>
    </div>
    <script>
      window.onload = function() {
        const localStorageInfo = {
          name: "It's iframe's localStorage",
          url: String(window.location),
        };

        localStorage.setItem("localStorageInfo", localStorageInfo);
        document.getElementById("code").textContent = JSON.stringify(
          localStorageInfo
        );
      };
      
      window.addEventListener('message', event => {
        if (event.origin.startsWith('http://localhost:3000/')) { 
        console.log(event.data); 
        } else {
          return; 
        } 
      }); 

//       window.onmessage = function(e) {
//         if (!e.origin.startsWith("http://localhost:3000/")) {
//           return;
//         }

//         const payload = JSON.parse(e.data);

//         switch (payload.method) {
//           case "set":
//             localStorage.setItem(payload.key, JSON.stringify(payload.data));
//             break;
//           case "get":
//             const parent = window.parent;
//             const data = localStorage.getItem(payload.key);
//             parent.postMessage(data, "*");
//             break;
//           case "remove":
//             localStorage.removeItem(payload.key);
//             break;
//         }
//       };
    </script>
  </body>
</html>
